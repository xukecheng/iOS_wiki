##  Mastering charts in SwiftUI. Legends.

22 Feb 2023

Last week we started the topic of the Swift Charts framework customization
options using a bunch of chart view modifiers. It is a vast topic that I
divide into a few small posts. This week we will discuss configuring the
legend view using the new Swift Charts framework.

**Enhancing the Xcode Simulators.**  
Compare designs, show rulers, add a grid, quick actions for recent builds.
Create recordings with touches & audio, trim and export them into MP4 or GIF
and share them anywhere using drag & drop. Add bezels to screenshots and
videos. [ Try now ](https://gumroad.com/a/931293139/ftvbh)

The Swift Charts framework is smart enough to infer and display the legend
view for your chart automatically. Let’s take a look at the concrete example.

    
    
    struct ContentView: View {
        let stats: [Stats]
        
        var body: some View {
            Chart {
                ForEach(stats, id: \.city) { stat in
                    BarMark(
                        x: .value("City", stat.city),
                        y: .value("Population", stat.population)
                    )
                    .foregroundStyle(by: .value("Gender", stat.gender))
                    .position(by: .value("Gender", stat.gender))
                }
            }
        }
    }
    

![gender-chart-with-legend](/public/chart15.png)

> To learn more about the basics of the Charts framework, take a look at my
> dedicated [ “Mastering charts in SwiftUI. Basics.” ](/2023/01/10/mastering-
> charts-in-swiftui-basics/) post.

As you can see in the example above, our chart has a legend view automatically
generated by the Swift Charts framework. We use the _foregroundStyle_ modifier
on the _BarMark_ type, which allows the framework to create a legend view. It
looks good, but what if we don’t need the legend view at all? In this case, we
can use the _chartLegend_ view modifier to control the visibility of the
legend view.

    
    
    struct ContentView: View {
        let stats: [Stats]
        
        var body: some View {
            Chart {
                ForEach(stats, id: \.city) { stat in
                    BarMark(
                        x: .value("City", stat.city),
                        y: .value("Population", stat.population)
                    )
                    .foregroundStyle(by: .value("Gender", stat.gender))
                    .position(by: .value("Gender", stat.gender))
                }
            }
            .chartLegend(.hidden)
        }
    }
    

The _chartLegend_ modifier allows us to control the visibility of the legend
view by passing one of these three options: _automatic_ , _visible_ , and
_hidden_ . Another overload of the _chartLegend_ modifier allows us to control
the legend view’s position, alignment, and spacing.

    
    
    struct ContentView: View {
        let stats: [Stats]
        
        var body: some View {
            Chart {
                ForEach(stats, id: \.city) { stat in
                    BarMark(
                        x: .value("City", stat.city),
                        y: .value("Population", stat.population)
                    )
                    .foregroundStyle(by: .value("Gender", stat.gender))
                    .position(by: .value("Gender", stat.gender))
                }
            }
            .chartLegend(position: .top, alignment: .leading, spacing: 8)
        }
    }
    

Let’s move forward and customize the colors for our bars and circles in the
legend view representing them.

    
    
    struct ContentView: View {
        let stats: [Stats]
        
        var body: some View {
            Chart {
                ForEach(stats, id: \.city) { stat in
                    BarMark(
                        x: .value("City", stat.city),
                        y: .value("Population", stat.population)
                    )
                    .foregroundStyle(by: .value("Gender", stat.gender))
                    .position(by: .value("Gender", stat.gender))
                }
            }
            .chartForegroundStyleScale(
                domain: Gender.allCases,
                range: [.red, .orange, .black]
            )
        }
    }
    

As you can see in the example above, we use the _chartForegroundStyleScale_
modifier to provide both values and colors representing that values. The
_chartForegroundStyleScale_ modifier pairs with the _foregroundStyle_ modifier
and maps values you pass to colors on the chart and in the legend view.

> To learn more about customization options of the Charts framework, take a
> look at my dedicated [ “Mastering charts in SwiftUI. Customizations.”
> ](/2023/02/15/mastering-charts-in-swiftui-customizations/) post.

You might need to provide static data for your legend view in some specific
cases. For that, you can use another overload of the
_chartForegroundStyleScale_ modifier accepting a key-value literal.

    
    
    struct ContentView: View {
        let stats: [Stats]
        
        var body: some View {
            Chart {
                ForEach(stats, id: \.city) { stat in
                    BarMark(
                        x: .value("City", stat.city),
                        y: .value("Population", stat.population)
                    )
                    .foregroundStyle(by: .value("Gender", stat.gender))
                    .position(by: .value("Gender", stat.gender))
                }
            }
            .chartForegroundStyleScale(
                [
                    Gender.notSet: Color.black,
                    .female: Color.orange,
                    .male: Color.red
                ]
            )
        }
    }
    

In the example above, we use the _chartForegroundStyleScale_ and pass the
dictionary with gender-color pairs. Usually, we generate this data dynamically
using some logic, but you can also hardcode these values if needed.

I hope you enjoy the post. Feel free to follow me on [ Twitter
](https://twitter.com/mecid) and ask your questions related to this post.
Thanks for reading, and see you next week!

